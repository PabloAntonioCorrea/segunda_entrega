<div class="d-flex flex-column align-items-center mt-4">
  <h1>Gestão de Clientes</h1>
  <p>Gerencie as informações dos clientes aqui.</p>
</div>

<div class="container">
  <form
    [formGroup]="form"
    (ngSubmit)="editing ? atualizarCliente() : adicionarCliente()"
    class="mb-4"
  >
    <div class="row">
      <mat-form-field appearance="outline" class="col-md-4">
        <mat-label>Nome do Cliente</mat-label>
        <input matInput type="text" formControlName="nome">
        <mat-error>
          Nome é obrigatório
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-md-4">
        <mat-label>Email do Cliente</mat-label>
        <input matInput type="email" formControlName="email">
        <mat-error>
          Email é obrigatório e deve ser válido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-md-4">
        <mat-label>Telefone</mat-label>
        <input matInput type="text" formControlName="telefone" placeholder="(XX) XXXXX-XXXX" (input)="formatarTelefone($event)">
        <mat-error>
          Telefone é obrigatório (formato: (XX) XXXXX-XXXX)
        </mat-error>
      </mat-form-field>
    </div>
    <div class="d-flex justify-content-center">
      <button mat-raised-button color="primary" type="submit">
        {{ editing ? 'Atualizar Cliente' : 'Adicionar Cliente' }}
      </button>
    </div>
  </form>

  @if (dados.length === 0) {
    <p class="text-center mt-2">Nenhum cliente cadastrado.</p>
  } @else {
    <table class="table table-responsive table-secondary mt-2">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (dado of dados; track dado.id) {
          <tr>
            <td>{{ dado.id }}</td>
            <td>{{ dado.nome }}</td>
            <td>{{ dado.email }}</td>
            <td>{{ dado.telefone }}</td>
            <td class="text-end">
              <button mat-button (click)="editarCliente(dado)">
                <mat-icon>edit</mat-icon>
                Editar
              </button>
              <button mat-button (click)="deletarCliente(dado)" color="warn">
                <mat-icon>delete</mat-icon>
                Deletar
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>

