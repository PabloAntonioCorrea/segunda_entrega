<div class="d-flex flex-column align-items-center mt-4">
  <h1>Gestão de Pratos</h1>
  <p>Gerencie o cardápio do restaurante aqui.</p>
</div>

<div class="container">
  <form
    [formGroup]="form"
    (ngSubmit)="editing ? atualizarPrato() : adicionarPrato()"
    class="mb-4"
  >
    <div class="row">
      <mat-form-field appearance="outline" class="col-md-8">
        <mat-label>Nome do Prato</mat-label>
        <input matInput type="text" formControlName="nome">
        <mat-error>
          Nome é obrigatório
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-md-4">
        <mat-label>Preço</mat-label>
        <input matInput type="number" step="0.01" formControlName="preco">
        <mat-error>
          Preço é obrigatório e deve ser maior que zero
        </mat-error>
      </mat-form-field>
    </div>
    <div class="d-flex justify-content-center">
      <button mat-raised-button color="primary" type="submit">
        {{ editing ? 'Atualizar Prato' : 'Adicionar Prato' }}
      </button>
    </div>
  </form>

  @if (dados.length === 0) {
    <p class="text-center mt-2">Nenhum prato cadastrado.</p>
  } @else {
    <table class="table table-responsive table-secondary mt-2">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>Preço</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (dado of dados; track dado.id) {
          <tr>
            <td>{{ dado.id }}</td>
            <td>{{ dado.nome }}</td>
            <td>{{ formatarPreco(dado.preco) }}</td>
            <td class="text-end">
              <button mat-button (click)="editarPrato(dado)">
                <mat-icon>edit</mat-icon>
                Editar
              </button>
              <button mat-button (click)="deletarPrato(dado)" color="warn">
                <mat-icon>delete</mat-icon>
                Deletar
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>

