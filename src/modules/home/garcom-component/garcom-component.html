<div class="d-flex flex-column align-items-center mt-4">
  <h1>Gestão de Garçons</h1>
  <p>Gerencie as informações dos garçons aqui.</p>
</div>

<div class="container">
  <form
    [formGroup]="form"
    (ngSubmit)="editing ? atualizarGarcom() : adicionarGarcom()"
    class="mb-4"
  >
    <div class="row">
      <mat-form-field appearance="outline" class="col-md-6">
        <mat-label>Nome do Garçom</mat-label>
        <input matInput type="text" formControlName="nome" />
        <mat-error> Nome é obrigatório </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-md-6">
        <mat-label>Matrícula</mat-label>
        <input
          matInput
          type="text"
          formControlName="matricula"
          placeholder="GAR0001"
        />
        <mat-error> Matrícula é obrigatória (formato: GARXXXX) </mat-error>
      </mat-form-field>
    </div>
    <div class="d-flex justify-content-center">
      <button mat-raised-button color="primary" type="submit">
        {{ editing ? 'Atualizar Garçom' : 'Adicionar Garçom' }}
      </button>
    </div>
  </form>

  @if (dados.length === 0) {
  <p class="text-center mt-2">Nenhum garçom cadastrado.</p>
  } @else {
  <table class="table table-responsive table-secondary mt-2">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Matrícula</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @for (dado of dados; track dado.id) {
      <tr>
        <td>{{ dado.id }}</td>
        <td>{{ dado.nome }}</td>
        <td>{{ dado.matricula }}</td>
        <td class="text-end">
          <button mat-button (click)="editarGarcom(dado)">
            <mat-icon>edit</mat-icon>
            Editar
          </button>
          <button mat-button (click)="deletarGarcom(dado)" color="warn">
            <mat-icon>delete</mat-icon>
            Deletar
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
